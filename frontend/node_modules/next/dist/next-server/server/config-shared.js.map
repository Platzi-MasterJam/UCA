{"version":3,"sources":["../../../next-server/server/config-shared.ts"],"names":["defaultConfig","env","webpack","webpackDevMiddleware","distDir","assetPrefix","configOrigin","useFileSystemPublicRoutes","generateBuildId","generateEtags","pageExtensions","target","poweredByHeader","compress","analyticsId","process","VERCEL_ANALYTICS_ID","images","imageConfigDefault","devIndicators","buildActivity","onDemandEntries","maxInactiveAge","pagesBufferLength","amp","canonicalBase","basePath","sassOptions","trailingSlash","i18n","productionBrowserSourceMaps","optimizeFonts","experimental","cpus","Math","max","Number","CIRCLE_NODE_TOTAL","os","length","plugins","profiling","sprFlushToDisk","workerThreads","pageEnv","optimizeImages","optimizeCss","scrollRestoration","scriptLoader","stats","externalDir","serialWebpackBuild","turboMode","eslint","reactRoot","NEXT_PRIVATE_REACT_ROOT","enableBlurryPlaceholder","disableOptimizedLoading","gzipSize","future","strictPostcssConfiguration","excludeDefaultMomentLocales","webpack5","NEXT_PRIVATE_TEST_WEBPACK5_MODE","serverRuntimeConfig","publicRuntimeConfig","reactStrictMode","normalizeConfig","phase","config","then","Error"],"mappings":"0GAAA,8CAEA,2C,mFAkEO,KAAMA,CAAAA,aAAyB,CAAG,CACvCC,GAAG,CAAE,EADkC,CAEvCC,OAAO,CAAE,IAF8B,CAGvCC,oBAAoB,CAAE,IAHiB,CAIvCC,OAAO,CAAE,OAJ8B,CAKvCC,WAAW,CAAE,EAL0B,CAMvCC,YAAY,CAAE,SANyB,CAOvCC,yBAAyB,CAAE,IAPY,CAQvCC,eAAe,CAAE,IAAM,IARgB,CASvCC,aAAa,CAAE,IATwB,CAUvCC,cAAc,CAAE,CAAC,KAAD,CAAQ,IAAR,CAAc,KAAd,CAAqB,IAArB,CAVuB,CAWvCC,MAAM,CAAE,QAX+B,CAYvCC,eAAe,CAAE,IAZsB,CAavCC,QAAQ,CAAE,IAb6B,CAcvCC,WAAW,CAAEC,OAAO,CAACd,GAAR,CAAYe,mBAAZ,EAAmC,EAdT,CAevCC,MAAM,CAAEC,+BAf+B,CAgBvCC,aAAa,CAAE,CACbC,aAAa,CAAE,IADF,CAhBwB,CAmBvCC,eAAe,CAAE,CACfC,cAAc,CAAE,GAAK,IADN,CAEfC,iBAAiB,CAAE,CAFJ,CAnBsB,CAuBvCC,GAAG,CAAE,CACHC,aAAa,CAAE,EADZ,CAvBkC,CA0BvCC,QAAQ,CAAE,EA1B6B,CA2BvCC,WAAW,CAAE,EA3B0B,CA4BvCC,aAAa,CAAE,KA5BwB,CA6BvCC,IAAI,CAAE,IA7BiC,CA8BvCC,2BAA2B,CAAE,KA9BU,CA+BvCC,aAAa,CAAE,IA/BwB,CAgCvCC,YAAY,CAAE,CACZC,IAAI,CAAEC,IAAI,CAACC,GAAL,CACJ,CADI,CAEJ,CAACC,MAAM,CAACrB,OAAO,CAACd,GAAR,CAAYoC,iBAAb,CAAN,EACC,CAACC,YAAGL,IAAH,IAAa,CAAEM,MAAM,CAAE,CAAV,CAAd,EAA6BA,MAD/B,EACyC,CAHrC,CADM,CAMZC,OAAO,CAAE,KANG,CAOZC,SAAS,CAAE,KAPC,CAQZC,cAAc,CAAE,IARJ,CASZC,aAAa,CAAE,KATH,CAUZC,OAAO,CAAE,KAVG,CAWZC,cAAc,CAAE,KAXJ,CAYZC,WAAW,CAAE,KAZD,CAaZC,iBAAiB,CAAE,KAbP,CAcZC,YAAY,CAAE,KAdF,CAeZC,KAAK,CAAE,KAfK,CAgBZC,WAAW,CAAE,KAhBD,CAiBZC,kBAAkB,CAAE,KAjBR,CAkBZC,SAAS,CAAE,KAlBC,CAmBZC,MAAM,CAAE,KAnBI,CAoBZC,SAAS,CAAElB,MAAM,CAACrB,OAAO,CAACd,GAAR,CAAYsD,uBAAb,CAAN,CAA8C,CApB7C,CAqBZC,uBAAuB,CAAE,KArBb,CAsBZC,uBAAuB,CAAE,IAtBb,CAuBZC,QAAQ,CAAE,IAvBE,CAhCyB,CAyDvCC,MAAM,CAAE,CACNC,0BAA0B,CAAE,KADtB,CAENC,2BAA2B,CAAE,KAFvB,CAGNC,QAAQ,CAAE1B,MAAM,CAACrB,OAAO,CAACd,GAAR,CAAY8D,+BAAb,CAAN,CAAsD,CAH1D,CAzD+B,CA8DvCC,mBAAmB,CAAE,EA9DkB,CA+DvCC,mBAAmB,CAAE,EA/DkB,CAgEvCC,eAAe,CAAE,KAhEsB,CAAlC,C,oCAmEA,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAwCC,MAAxC,CAAqD,CAC1D,GAAI,MAAOA,CAAAA,MAAP,GAAkB,UAAtB,CAAkC,CAChCA,MAAM,CAAGA,MAAM,CAACD,KAAD,CAAQ,CAAEpE,aAAF,CAAR,CAAf,CAEA,GAAI,MAAOqE,CAAAA,MAAM,CAACC,IAAd,GAAuB,UAA3B,CAAuC,CACrC,KAAM,IAAIC,CAAAA,KAAJ,CACJ,4FADI,CAAN,CAGD,CACF,CACD,MAAOF,CAAAA,MAAP,CACD","sourcesContent":["import os from 'os'\nimport { Header, Redirect, Rewrite } from '../../lib/load-custom-routes'\nimport { imageConfigDefault } from './image-config'\n\nexport type DomainLocales = Array<{\n  http?: true\n  domain: string\n  locales?: string[]\n  defaultLocale: string\n}>\n\nexport type NextConfig = { [key: string]: any } & {\n  i18n?: {\n    locales: string[]\n    defaultLocale: string\n    domains?: DomainLocales\n    localeDetection?: false\n  } | null\n\n  headers?: () => Promise<Header[]>\n  rewrites?: () => Promise<\n    | Rewrite[]\n    | {\n        beforeFiles: Rewrite[]\n        afterFiles: Rewrite[]\n        fallback: Rewrite[]\n      }\n  >\n  redirects?: () => Promise<Redirect[]>\n\n  trailingSlash?: boolean\n\n  future: {\n    strictPostcssConfiguration?: boolean\n    excludeDefaultMomentLocales?: boolean\n    webpack5?: boolean\n  }\n\n  experimental: {\n    cpus?: number\n    plugins?: boolean\n    profiling?: boolean\n    sprFlushToDisk?: boolean\n    reactMode?: 'legacy' | 'concurrent' | 'blocking'\n    workerThreads?: boolean\n    pageEnv?: boolean\n    optimizeImages?: boolean\n    optimizeCss?: boolean\n    scrollRestoration?: boolean\n    scriptLoader?: boolean\n    stats?: boolean\n    externalDir?: boolean\n    serialWebpackBuild?: boolean\n    conformance?: boolean\n    amp?: {\n      optimizer?: any\n      validator?: string\n      skipValidation?: boolean\n    }\n    turboMode?: boolean\n    eslint?: boolean\n    reactRoot?: boolean\n    enableBlurryPlaceholder?: boolean\n    disableOptimizedLoading?: boolean\n    gzipSize?: boolean\n  }\n}\n\nexport const defaultConfig: NextConfig = {\n  env: [],\n  webpack: null,\n  webpackDevMiddleware: null,\n  distDir: '.next',\n  assetPrefix: '',\n  configOrigin: 'default',\n  useFileSystemPublicRoutes: true,\n  generateBuildId: () => null,\n  generateEtags: true,\n  pageExtensions: ['tsx', 'ts', 'jsx', 'js'],\n  target: 'server',\n  poweredByHeader: true,\n  compress: true,\n  analyticsId: process.env.VERCEL_ANALYTICS_ID || '',\n  images: imageConfigDefault,\n  devIndicators: {\n    buildActivity: true,\n  },\n  onDemandEntries: {\n    maxInactiveAge: 60 * 1000,\n    pagesBufferLength: 2,\n  },\n  amp: {\n    canonicalBase: '',\n  },\n  basePath: '',\n  sassOptions: {},\n  trailingSlash: false,\n  i18n: null,\n  productionBrowserSourceMaps: false,\n  optimizeFonts: true,\n  experimental: {\n    cpus: Math.max(\n      1,\n      (Number(process.env.CIRCLE_NODE_TOTAL) ||\n        (os.cpus() || { length: 1 }).length) - 1\n    ),\n    plugins: false,\n    profiling: false,\n    sprFlushToDisk: true,\n    workerThreads: false,\n    pageEnv: false,\n    optimizeImages: false,\n    optimizeCss: false,\n    scrollRestoration: false,\n    scriptLoader: false,\n    stats: false,\n    externalDir: false,\n    serialWebpackBuild: false,\n    turboMode: false,\n    eslint: false,\n    reactRoot: Number(process.env.NEXT_PRIVATE_REACT_ROOT) > 0,\n    enableBlurryPlaceholder: false,\n    disableOptimizedLoading: true,\n    gzipSize: true,\n  },\n  future: {\n    strictPostcssConfiguration: false,\n    excludeDefaultMomentLocales: false,\n    webpack5: Number(process.env.NEXT_PRIVATE_TEST_WEBPACK5_MODE) > 0,\n  },\n  serverRuntimeConfig: {},\n  publicRuntimeConfig: {},\n  reactStrictMode: false,\n}\n\nexport function normalizeConfig(phase: string, config: any) {\n  if (typeof config === 'function') {\n    config = config(phase, { defaultConfig })\n\n    if (typeof config.then === 'function') {\n      throw new Error(\n        '> Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'\n      )\n    }\n  }\n  return config\n}\n"]}